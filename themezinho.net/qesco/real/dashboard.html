<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
 
  <link rel="stylesheet" href="../admin/login_files/bootstrap.min.css">
<script src="https://kit.fontawesome.com/5a62f8e544.js" crossorigin="anonymous"></script>  
<script src="https://code.jquery.com/jquery-3.7.0.js" integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM=" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <link rel="stylesheet" href="style.css">
  
</head>
<body>
  <div class="navbarr">
    <a href="dashboard.html" class="active">Dashboard</a>
    <a href="packages.html">Packages</a>
    <a href="trackingHistory.html">Tracking History</a>
   
    
  </div>
  <nav class="navbar navbar-expand-md navbar-dark bg-dark">
    <a class="navbar-brand" href="dashboard.html">P N Ohammah</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
     <ul class="navbar-nav ml-auto">
        <li class="nav-item active">
          <a class="nav-link" href="dashboard.html">Dashboard</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="packages.html">Packages</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="trackingHistory.html">Tracking History</a>
        </li>
       
      </ul>
    </div>
  </nav>
  <div class="content">
    <div class="container">
        <div class="row align-items-center justify-content-center">
            <div class="col-xl-6 col-lg-7 col-sm-12 col-12 fxt-bg-color">
                <span style="color:red;">*Please ensure that all the input fields are filled before proceeding to submit form</span>
                <div class="fxt-content">
                    <div class="live-section alert"></div>
                    <div class="fxt-header">
                       <h3>Add Package</h3>
                    <div class="fxt-form">
                        <form  id="signupForm">
                            <input type="hidden" name=""
                                value="">
                                <div class="form-group">
                                    <label for="">Tracking ID:</label>
                                    <div class="fxt-transformY-50 fxt-transition-delay-1">
                                        <input  id="trackingId" class="form-control"
                                            name="" placeholder="tracking ID" value="" >
                                    </div>
                                </div>
                                
                            <div class="form-group">
                                <label for="">Estimated time of delivery:</label>
                                <div class="fxt-transformY-50 fxt-transition-delay-1">
                                    <input type="text" id="etd" class="form-control" name=""
                                        placeholder="etd" value="" >
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="">Estimated time of arrival:</label>
                                <div class="fxt-transformY-50 fxt-transition-delay-1">
                                    <input  id="eta" class="form-control"
                                        name="" placeholder="eta" value="" >
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="">Destination of Package:</label>
                                <div class="fxt-transformY-50 fxt-transition-delay-1">
                                    <input  id="destination" class="form-control"
                                         placeholder="destination" >
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="fxt-transformY-50 fxt-transition-delay-1">
                                    <label for="">Total totalFreight:</label>
                                    <input  id="totalFreight" class="form-control"
                                        name="lastname" placeholder="totalFreight" >
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="">Service Type:</label>
                                <div class="fxt-transformY-50 fxt-transition-delay-1">
                                    <input  id="serviceType" class="form-control"
                                        name="" placeholder="serviceType" >
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="">Receiver Name:</label>
                                <div class="fxt-transformY-50 fxt-transition-delay-1">
                                    
                                    <input  id="receiverName" class="form-control"
                                        name="lastname" placeholder="receiverName" >
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="">Receiver Email:</label>
                                <div class="fxt-transformY-50 fxt-transition-delay-1">
                                    <input  id="receiverEmail" class="form-control"
                                        name="lastname" placeholder="receiverEmail" >
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="">Receiver Address:</label>
                                <div class="fxt-transformY-50 fxt-transition-delay-1">
                                    <input  id="receiverAddress" class="form-control"
                                        name="" placeholder="receiverAddress" >
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="">Delivery Day:</label>
                                <div class="fxt-transformY-50 fxt-transition-delay-1">
                                    <input  id="deliveryDay" class="form-control"
                                        name="" placeholder="deliveryDay" >
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="">Payment Mode:</label>
                                <div class="fxt-transformY-50 fxt-transition-delay-1">
                                    <input  id="paymentMode" class="form-control"
                                         placeholder="paymentMode" >
                                </div>
                            </div>


                            <div class="form-group">
                                <label for="">Sender Name:</label>
                                <div class="fxt-transformY-50 fxt-transition-delay-1">
                                    <input  id="senderName" class="form-control"
                                        name="lastname" placeholder="senderName">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="">Sender Email:</label>
                                <div class="fxt-transformY-50 fxt-transition-delay-1">
                                    <input  id="senderEmail" class="form-control"
                                        name="lastname" placeholder="senderEmail" >
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="">Sender Address:</label>
                                <div class="fxt-transformY-50 fxt-transition-delay-1">
                                    <input  id="senderAddress" class="form-control"
                                        name="" placeholder="senderAddress" >
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="">Item Type:</label>
                                <div class="fxt-transformY-50 fxt-transition-delay-1">
                                    <input  id="itemType" class="form-control"
                                        name="lastname" placeholder="itemType" >
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="">Weight:</label>
                                <div class="fxt-transformY-50 fxt-transition-delay-1">
                                    <input type="weight" id="weight" class="form-control"
                                        name="lastname" placeholder="weight" >
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="">Mode of Transportation Name:</label>
                                <div class="fxt-transformY-50 fxt-transition-delay-1">
                                    <input  id="mot" class="form-control"
                                        name="lastname" placeholder="mode of transportation" >
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="">Consignment Details:</label>
                                <div class="fxt-transformY-50 fxt-transition-delay-1">
                                    <input  id="consignmentDetails" class="form-control"
                                        name="lastname" placeholder="consignmentDetails" >
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="">FMT:</label>
                                <div class="fxt-transformY-50 fxt-transition-delay-1">
                                    <input  id="fmt" class="form-control"
                                        name="lastname" placeholder="fmt" >
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="">Shipment Activity:</label>
                                <div class="fxt-transformY-50 fxt-transition-delay-1">
                                    <input  id="location" class="form-control"
                                        name="lastname" placeholder="shipment activity" >
                                </div>
                            </div>
                            
                                <!-- <div class="g-recaptcha" data-sitekey="6LcPmLsZAAAAAC-_WMytYMOGJcgsa2it6VdMO-K5" data-callback="enableBtn"><div style="width: 304px; height: 78px;"><div><iframe title="reCAPTCHA" src="./register_files/anchor.html" width="304" height="78" role="presentation" name="a-qulbpamvo9q2" frameborder="0" scrolling="no" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-top-navigation allow-modals allow-popups-to-escape-sandbox allow-storage-access-by-user-activation"></iframe></div><textarea id="g-recaptcha-response" name="g-recaptcha-response" class="g-recaptcha-response" style="width: 250px; height: 40px; border: 1px solid rgb(193, 193, 193); margin: 10px 25px; padding: 0px; resize: none; display: none;"></textarea></div><iframe style="display: none;" src="./register_files/saved_resource.html"></iframe></div>
                    </div>-->
                               
                                <div class="form-group">
                                    <div class="fxt-transformY-50 fxt-transition-delay-4">
                                        <button class="btn btn-primary" id="registerBtn" onclick="blurr()" >Add package</button>

                                    </div>
                                </div>
                        </form>
                    </div>
                    <div class="fxt-footer">
                        <div><span style="color:blue;">If form fails to submit on first submission,please retry or check the "packages" page for the package you tried to create</span></div>
                    </div>
                </div>
            </div>
        </div>
    
  </div>



  <script>
    var btn=document.getElementById('registerBtn');
function red () {
     btn.style.opacity="1"
     btn.innerHTML="Add package"
   }

function blurr (){
 
 btn.style.opacity="0.5"
 btn.innerHTML= "Loading . . ."

}
function topFunction() {
  document.body.scrollTop = 0; // For Safari
  document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
}


     async function registerUser(values) {
        console.log(values)
         await $.ajax({
             type: "POST",
             url: "https://quesco-sserver.onrender.com/auth/register",
             dataType: "json",
             data: { ...values },
             timeout: 30000,
             success: function (data) {
                 console.log(data);
                 $('.live-section').html("package was successfully created").addClass('alert-success')
                 setTimeout(function () {
                     $(location).prop('href', './packages.html')
                 }, 1000)
                // swal("Success", data.success, "success");
				// 						setTimeout(function(){window.location.replace("./packages.html"); }, 2000);
									

             },
             error: function (xhr, status, error) {
                 red();
            
                 console.log(error);
                 $('.live-section').html("Network connection error. Try again").addClass('alert-danger')
             }
         });

     }


     $('#signupForm').submit(function (e) {
         e.preventDefault(); // prevents page reload
         

        var etd= $('#etd').val()
     var eta= $('#eta').val()
     var totalFreight=$('#totalFreight').val()
    var destination=$('#destination').val()
    var paymentMode= $('#paymentMode').val()
    var senderAddress= $('#senderAddress').val()
   
      var serviceType=$('#serviceType').val()
     var receiverName= $('#receiverName').val()
   var receiverEmail =$('#receiverEmail').val()
    var receiverAddress=  $('#receiverAddress').val()
     var deliveryDay= $('#deliveryDay').val()
    var senderName= $('#senderName').val()
    var senderEmail= $('#senderEmail').val()
   var itemType=$('#itemType').val()
   var weight=$('#weight').val()
   var mot=$('#mot').val()
   var fmt=$('#fmt').val()
   var consignmentDetails=$('#consignmentDetails').val()
   var location=$('#location').val()
   var trackingId=$('#trackingId').val()
  

         localStorage.setItem("email",receiverEmail)
         
       
        
         registerUser({ etd,eta,fmt,trackingId,
totalFreight,
serviceType,
destination,
 paymentMode,
receiverName,
receiverEmail,
receiverAddress,
deliveryDay,
senderName,
senderEmail,
senderAddress,
itemType,
weight,
mot,
consignmentDetails,

location
});

         blurr();
         topFunction();
         console.log( etd,
eta,
fmt,
totalFreight,trackingId,
serviceType,
destination,
paymentMode,
receiverName,
receiverEmail,
receiverAddress,
deliveryDay,
senderName,
senderEmail,
senderAddress,
itemType,
weight,
mot,
consignmentDetails,

location)

     });

 </script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
