<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/v.1.4.0/jspdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.4.1/jspdf.debug.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.0/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.3/jspdf.umd.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script> 
    <title>Document</title>
</head>
<body>
    <style>
      #map-container {
      width: 100%;
      height: 300px;
      position: relative;
      overflow: hidden;
    }

    .scrolling-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 24px;
      color: white;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.6);
      white-space: nowrap;
      animation: scroll 10s linear infinite;
    }

    @keyframes scroll {
      0% {
        transform: translate(-50%, -50%);
      }

      100% {
        transform: translate(-50%, -50%) translateY(-100%);
      }
    }
        .itemHeader
{
  background-color: #063057 ;
  color: white;
}
.itemCard
{
  display: flex;
  flex-direction: column;
   border:1px solid #ebe7e7;
}

.innerCard
{
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  row-gap: 2;
  padding: 10px;
}

.input{
  width: 30px;
}



.grid-container {
  
  display: grid;
  grid-template-columns: repeat(1, 1fr);
  grid-template-rows: auto 1fr;
  gap: 10px;
  /* width: 400px;
  height: 200px;
  border: 1px solid black; */
}

.box {
 }

.box4 {
  grid-column: 1 / span 1;
}

.p-2
{
  font-weight: 500;
}


#loader
{
  display:none;
}

#detail
{
  display: none;
}


    </style>
    <section class="content-section" id="detai">

        <div class=" container grid-container">
          
          <div class=" itemCard box">
            <h4 class="p-2 mb-5">TRACKING NUMBER</h4>
            
            <div class="innerCard">
              
              <div style="">
                <h4 class="p-2" style="color:brown;">Tracking result for:</h4>
                <div class="p-1"  id="id" style="font-weight:600"></div>
                 
           
                </div>
                  <div style="">
                    <div id="date"></div>
                     </div>
                  
                
              </div>
              
        
            
              </div>
        
          <div class=" itemCard box">
            <header style="display: flex; flex-direction: row; background-color:   #063057;">
      <h3 class="p-2 itemHeader">DESTINATION:</h3>
      <h3 class="p-2 itemHeader" style="margin-left: 150px;">SHIPMENT DATE:</h3>
      </header>
      <div class="innerCard" style="background-color: rgb(242, 245, 245);">
      <div>
        <div class="p-1"  id="destination" style="color:brown; font-size: 30px; font-weight: 500;"></div>
        
      </div>
      <div style="">
        <div class="mb-3" style="color: blue;  font-weight: 500;">Estimated time of Departure (ETD):</div>
        <div class="p-1"  id="etd" ></div>
        </div>
        <div>
          <div class="mb-3" style="color: blue;  font-weight: 500;">Estimated time of Arrival (ETA):</div>
          <div class="p-1"  id="eta"></div>
        
          <!-- <input type="text" placeholder="time" readonly>
         -->
          </div>
        
        
      </div>
      
        </div>
      
        <div class=" itemCard box">
          <h3 class="p-2 itemHeader" style="background-color: #532e6b;">PAYMENT DETAILS</h3>
          
          <div class="innerCard">
            <div style="">
              <div class="mb-3" style="color: blue;  font-weight: 500;">TOTAL FRIEGHT</div>
              <div class="p-1"  id="totalFreight"></div>
              </div>
              <div>
                <div class="mb-3" style="color: blue;  font-weight: 500;">BOOKING MODE</div>
                <div class="p-1"  id="paymentMode"></div>
              
                <!-- <input type="text" placeholder="time" readonly>
               -->
                </div>
              
              
            </div>
            
      
          
            </div>
      
            <div class=" itemCard box">
              
              <div class="innerCard">
                <div style="display: flex;flex-direction: column;">
                  <h3 class="p-2 ">Shipped to:</h3>
                  <span class="p-2">Name:<span id="receiverName"></span></span>
                  <span class="p-2">Email:<span id="receiverEmail"></span></span>
                  <span class="p-2">Address:<span id="receiverAddress"></span></span>
                 
      
                  </div>
                  <div style="display: flex;flex-direction: column;">
                    <h3 class="mb-3" >shipper's details</h3>
                    <span class="p-2">Name:<span id="senderName"></span></span>
                    <span class="p-2">Email:<span id="senderEmail"></span></span>
                    <span class="p-2">Address:<span id="senderAddress"></span></span>
                   
                   
                    <!-- <input type="text" placeholder="time" readonly>
                   -->
                    </div>
                  
                  
                </div>
                
                  </div>
                  <div class=" itemCard box">
                    <h3 class="p-2 itemHeader"  style="background-color: #532e6b;">CONSIGNMENT DETAILS</h3>
                    
                    <div class="innerCard">
                      <div style="">
                        <div class="mb-3" style="color: blue;  font-weight: 500;">ITEM TYPE</div>
                        <div class="p-1" id="itemType"></div>
                        </div>
                        <div>
                          <div class="mb-3" style="color: blue;  font-weight: 500;">WEIGHT</div>
                          <div class="p-1"  id="weight"></div>
                        
                          <!-- <input type="text" placeholder="time" readonly>
                         -->
                          </div>
                          <div>
                            <div class="mb-3" style="color: blue;  font-weight: 500;">MODE OF TRANSPORTATION</div>
                            <div class="p-1"  id="mot"></div>
                          
                            <!-- <input type="text" placeholder="time" readonly>
                           -->
                            </div>
                         
                        
                      </div>
                      
                
                    
                      </div>
                
                      <div class=" itemCard box">
                        <h3 class="p-2 itemHeader" style="background-color: #532e6b;">Shipment Activity</h3>
                        
                        <div class="innerCard">
                          <div style="">
                            <div class="p-1 mb-4"  id="consignmentDetails"></div>
                            </div>
                            
                            
                            

                          </div>
                          <div class=" itemCard box">
                            <h3 class="p-2 itemHeader" style="background-color: #532e6b;">Current Location</h3>
                            
                            <div class="innerCard">
                                
                              <div id="map-container">
                                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d193747.3920864414!2d-74.0064!3d40.7144!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89c259da88f23223%3A0x6c76bfae9e895b1e!2sNew%20York%2C%20NY%2C%20USA!5e0!3m2!1sen!2s!4v1625926926706!5m2!1sen!2s" width="100%" height="100%" frameborder="0" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                                <div class="scrolling-text" style="background-color: white;padding:5px; color:black">It is my turn</div>
                              </div>
    
                                
    
                              </div>
                         




                          <button onclick="captureScreenAndConvertToPDF()" class=" btn btn-md btn-primary"id="hide">Save</button>
         
                  
                        
                          </div>
                           </div>
                
          
                          
      </div>
      <!-- <button onclick="printPage()">Print Page</button>
      <button onclick="savePage()">Save Page</button>
      <button onclick="savePageAsPDF()">save as pdf</button> -->
    
      </section>
      <script>

        var currentUser = {};
        
        
        $(document).ready(async function () {
        
          async function fetchUserInfo() {
           
          var userDetails= localStorage.getItem('user')
        
        var user= JSON.parse(userDetails)
         
        
          return user;
        }
        
          const userInfo = await fetchUserInfo();
        console.log(userInfo);
          $('#eta').text(userInfo.eta)
          $('#etd').text(userInfo.etd)
          $('#destination').text(userInfo.destination)
          $('#serviceType').text(userInfo.serviceType)
          $('#receiverName').text(userInfo.receiverName)
          $('#receiverEmail').text(userInfo.receiverEmail)
          $('#receiverAddress').text(userInfo.receiverAddress)
          $('#senderName').text(userInfo.senderName)
          $('#senderEmail').text(userInfo.senderEmail)
          $('#senderAddress').text(userInfo.senderAddress)
          $('#paymentMode').text(userInfo.paymentMode)
          $('#deliveryDay').text(userInfo.deliveryDay)
          $('#weight').text(userInfo.weight)
          $('#itemType').text(userInfo.itemType)
          $('#consignmentDetails').text(userInfo.consignmentDetails)
          $('#mot').text(userInfo.mot)
          $('#location').text(userInfo.location)
          $('#id').text(userInfo._id)
          $('#date').text(userInfo.date)
          $('#totalFreight').text(userInfo.totalFreight)
          $('#id').text(userInfo._id)
         
        
        
        
         });
          
        
          
           
        
          </script>
        
    

      <script>
        function captureScreenAndConvertToPDF() {
            var hide=document.getElementById('hide')
            hide.style="display:none;"
          // Capture the screen as an image using html2canvas
          html2canvas(document.body).then(function(canvas) {
            // Convert the image to a Data URL
            var imgData = canvas.toDataURL('image/png');
            
            // Create a new jsPDF instance
            var doc = new jsPDF();
            
            // Set the width and height of the PDF document to match the captured image
            var imgWidth = doc.internal.pageSize.getWidth();
            var imgHeight = doc.internal.pageSize.getHeight();
            
            // Add the image to the PDF document
            doc.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);
            
            // Save the PDF file
            doc.save('receipt.pdf');
          });
        }
        </script>
        

     
      <script>
        function savePageAsPDF() {
          // Create a new jsPDF instance
          var doc = new jsPDF();
          
          // Get the HTML content of the page
          var htmlContent = document.documentElement.outerHTML;
          
          // Convert HTML to PDF
          doc.fromHTML(htmlContent, 15, 15, {
            width: 170
          });
          
          // Save the PDF file
          doc.save('page.pdf');
        }
      </script>

      <script>
        function savePage() {
          // Get the HTML content of the page
          var htmlContent = document.documentElement.outerHTML;
          
          // Create a Blob object with the HTML content
          var blob = new Blob([htmlContent], { type: 'text/html' });
          
          // Create a URL for the Blob object
          var url = URL.createObjectURL(blob);
          
          // Create a link element and set its attributes
          var link = document.createElement('a');
          link.href = url;
          link.download = 'page.html';
          
          // Programmatically click the link to trigger the download
          link.click();
          
          // Clean up by revoking the URL
          URL.revokeObjectURL(url);
        }
      </script>
      
      <script>
        function printPage() {
          window.print();
        }
      </script>
      
</body>
</html>